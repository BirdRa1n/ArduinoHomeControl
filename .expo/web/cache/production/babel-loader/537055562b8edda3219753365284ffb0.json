{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";var _excluded=[\"placement\",\"title\",\"render\",\"status\",\"id\",\"description\",\"isClosable\",\"duration\",\"variant\",\"accessibilityAnnouncement\",\"accessibilityLiveRegion\"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}import{OverlayContainer}from'@react-native-aria/overlays';import{PresenceTransition}from\"../Transitions\";import VStack from\"../../primitives/Stack/VStack\";import{Alert}from\"../../composites/Alert\";import React,{createContext,useState,useMemo}from'react';import AccessibilityInfo from\"react-native-web/dist/exports/AccessibilityInfo\";import Easing from\"react-native-web/dist/exports/Easing\";import Platform from\"react-native-web/dist/exports/Platform\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import IconButton from\"../IconButton\";import Box from\"../../primitives/Box\";import{usePropsResolution}from\"../../../hooks\";import{CloseIcon}from\"../../primitives/Icon/Icons\";import Text from\"../../primitives/Text\";import HStack from\"../../primitives/Stack/HStack\";import{useColorMode}from\"../../../core/color-mode/hooks\";var INSET=50;var POSITIONS={'top':{top:INSET,left:0,right:0},'top-right':{top:INSET,right:0},'top-left':{top:INSET,left:0},'bottom':{bottom:INSET,left:0,right:0},'bottom-left':{bottom:INSET,left:0},'bottom-right':{bottom:INSET,right:0}};var initialAnimationOffset=24;var transitionConfig={'bottom':initialAnimationOffset,'top':-initialAnimationOffset,'top-right':-initialAnimationOffset,'top-left':-initialAnimationOffset,'bottom-left':initialAnimationOffset,'bottom-right':initialAnimationOffset};var ToastContext=createContext({toastInfo:{},setToastInfo:function setToastInfo(){},setToast:function setToast(){},removeToast:function removeToast(){},hideAll:function hideAll(){},isActive:function isActive(){return false;},visibleToasts:{},setVisibleToasts:function setVisibleToasts(){},hideToast:function hideToast(){}});var CustomToast=function CustomToast(){var _React$useContext=React.useContext(ToastContext),toastInfo=_React$useContext.toastInfo,visibleToasts=_React$useContext.visibleToasts,removeToast=_React$useContext.removeToast;var getPositions=function getPositions(){return Object.keys(toastInfo);};return getPositions().length>0?React.createElement(OverlayContainer,null,getPositions().map(function(position){if(Object.keys(POSITIONS).includes(position))return React.createElement(VStack,_extends({margin:\"auto\",key:position},POSITIONS[position],{position:\"absolute\",space:2,alignItems:\"center\",justifyContent:\"center\",pointerEvents:\"box-none\"}),toastInfo[position].map(function(toast){return React.createElement(PresenceTransition,{key:toast.id,visible:visibleToasts[toast.id],onTransitionComplete:function onTransitionComplete(status){if(status==='exited'){var _toast$config,_toast$config2;removeToast(toast.id);((_toast$config=toast.config)===null||_toast$config===void 0?void 0:_toast$config.onCloseComplete)&&((_toast$config2=toast.config)===null||_toast$config2===void 0?void 0:_toast$config2.onCloseComplete());}},initial:{opacity:0,translateY:transitionConfig[position]},animate:{opacity:1,transition:{easing:Easing.ease,duration:250}},exit:{opacity:0,scale:0.85,transition:{easing:Easing.ease,duration:100}}},React.createElement(SafeAreaView,null,toast.component));}));else return null;})):null;};export var ToastProvider=function ToastProvider(_ref){var children=_ref.children;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),toastInfo=_useState2[0],setToastInfo=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),visibleToasts=_useState4[0],setVisibleToasts=_useState4[1];var _useState5=useState(usePropsResolution('Toast',{})),_useState6=_slicedToArray(_useState5,1),themeProps=_useState6[0];var _useColorMode=useColorMode(),colorMode=_useColorMode.colorMode;var toastIndex=React.useRef(1);var hideAll=React.useCallback(function(){setVisibleToasts({});},[setVisibleToasts]);var hideToast=React.useCallback(function(id){setVisibleToasts(function(prevVisibleToasts){return _objectSpread(_objectSpread({},prevVisibleToasts),{},_defineProperty({},id,false));});},[setVisibleToasts]);var isActive=React.useCallback(function(id){for(var _i=0,_Object$keys=Object.keys(toastInfo);_i<_Object$keys.length;_i++){var toastPosition=_Object$keys[_i];var positionArray=toastInfo[toastPosition];return positionArray.findIndex(function(toastData){return toastData.id===id;})>-1;}return false;},[toastInfo]);var removeToast=React.useCallback(function(id){setToastInfo(function(prev){for(var _i2=0,_Object$keys2=Object.keys(prev);_i2<_Object$keys2.length;_i2++){var toastPosition=_Object$keys2[_i2];var positionArray=prev[toastPosition];var isToastPresent=positionArray.findIndex(function(toastData){return toastData.id===id;})>-1;if(isToastPresent){var newPositionArray=positionArray.filter(function(item){return item.id!==id;});var temp={};temp[toastPosition]=newPositionArray;var newToastInfo=_objectSpread(_objectSpread({},prev),temp);return newToastInfo;}}return prev;});},[setToastInfo]);var getTextColor=React.useCallback(function(variant){switch(variant){case'left-accent':case'top-accent':case'subtle':return'coolGray.800';case'solid':return'warmGray.50';case'outline':case'outline-light':return colorMode==='light'?'coolGray.800':'warmGray.50';default:return'black';}},[colorMode]);var setToast=React.useCallback(function(props){var _props$placement=props.placement,placement=_props$placement===void 0?'bottom':_props$placement,title=props.title,render=props.render,status=props.status,_props$id=props.id,id=_props$id===void 0?toastIndex.current++:_props$id,description=props.description,_props$isClosable=props.isClosable,isClosable=_props$isClosable===void 0?true:_props$isClosable,_props$duration=props.duration,duration=_props$duration===void 0?5000:_props$duration,variant=props.variant,accessibilityAnnouncement=props.accessibilityAnnouncement,_props$accessibilityL=props.accessibilityLiveRegion,accessibilityLiveRegion=_props$accessibilityL===void 0?'polite':_props$accessibilityL,rest=_objectWithoutProperties(props,_excluded);var positionToastArray=toastInfo[placement];if(!positionToastArray)positionToastArray=[];var component=null;if(render){component=render({id:id});}else if(!status&&!variant){component=React.createElement(VStack,_extends({space:title&&description?1:0},themeProps,rest),React.createElement(Box,{_text:themeProps._title},title),description&&React.createElement(Box,{_text:themeProps._description},description));}else if(status||variant){component=React.createElement(Alert,_extends({maxWidth:\"100%\",alignSelf:\"center\",flexDirection:\"row\",status:status!==null&&status!==void 0?status:'info',variant:variant,accessibilityLiveRegion:accessibilityLiveRegion},rest),React.createElement(VStack,{space:1,flexShrink:1,w:\"100%\"},React.createElement(HStack,{flexShrink:1,alignItems:\"center\",justifyContent:\"space-between\"},React.createElement(HStack,{space:2,flexShrink:1,alignItems:\"center\"},React.createElement(Alert.Icon,null),React.createElement(Text,{fontSize:\"md\",fontWeight:\"medium\",color:getTextColor(variant!==null&&variant!==void 0?variant:'subtle'),flexShrink:1},title)),isClosable?React.createElement(IconButton,{variant:\"unstyled\",icon:React.createElement(CloseIcon,{size:\"3\",color:getTextColor(variant!==null&&variant!==void 0?variant:'subtle')}),onPress:function onPress(){return hideToast(id);}}):null),React.createElement(Box,{px:\"6\",_text:{color:getTextColor(variant!==null&&variant!==void 0?variant:'subtle')}},description)));}toastInfo[placement]=[].concat(_toConsumableArray(positionToastArray),[{component:component,id:id,config:props}]);setToastInfo(_objectSpread({},toastInfo));setVisibleToasts(_objectSpread(_objectSpread({},visibleToasts),{},_defineProperty({},id,true)));if(duration!==null){setTimeout(function(){hideToast(id);},duration);}if(accessibilityAnnouncement&&Platform.OS==='ios'){AccessibilityInfo.announceForAccessibility(accessibilityAnnouncement);}return id;},[getTextColor,themeProps,toastInfo,visibleToasts,hideToast]);var contextValue=React.useMemo(function(){return{toastInfo:toastInfo,setToastInfo:setToastInfo,setToast:setToast,removeToast:removeToast,hideAll:hideAll,isActive:isActive,visibleToasts:visibleToasts,setVisibleToasts:setVisibleToasts,hideToast:hideToast};},[toastInfo,setToastInfo,setToast,removeToast,hideAll,isActive,visibleToasts,setVisibleToasts,hideToast]);return React.createElement(ToastContext.Provider,{value:contextValue},children,React.createElement(CustomToast,null));};export var useToast=function useToast(){var _React$useContext2=React.useContext(ToastContext),setToast=_React$useContext2.setToast,hideAll=_React$useContext2.hideAll,isActive=_React$useContext2.isActive,hideToast=_React$useContext2.hideToast;var toast=useMemo(function(){return{show:setToast,close:hideToast,closeAll:hideAll,isActive:isActive};},[setToast,hideAll,isActive,hideToast]);return toast;};export var ToastRef=React.createRef();export var Toast={show:function show(props){var _ToastRef$current;return(_ToastRef$current=ToastRef.current)===null||_ToastRef$current===void 0?void 0:_ToastRef$current.show(props);},close:function close(id){var _ToastRef$current2;return(_ToastRef$current2=ToastRef.current)===null||_ToastRef$current2===void 0?void 0:_ToastRef$current2.close(id);},closeAll:function closeAll(){var _ToastRef$current3;return(_ToastRef$current3=ToastRef.current)===null||_ToastRef$current3===void 0?void 0:_ToastRef$current3.closeAll();},isActive:function isActive(id){var _ToastRef$current4;return(_ToastRef$current4=ToastRef.current)===null||_ToastRef$current4===void 0?void 0:_ToastRef$current4.isActive(id);}};","map":{"version":3,"sources":["Toast.tsx"],"names":["INSET","POSITIONS","top","left","right","bottom","initialAnimationOffset","transitionConfig","ToastContext","createContext","toastInfo","setToastInfo","setToast","removeToast","hideAll","isActive","visibleToasts","setVisibleToasts","hideToast","CustomToast","React","getPositions","Object","position","toast","status","opacity","translateY","transition","easing","Easing","duration","scale","ToastProvider","children","useState","usePropsResolution","colorMode","useColorMode","toastIndex","id","prevVisibleToasts","toastPosition","positionArray","toastData","prev","isToastPresent","newPositionArray","item","temp","newToastInfo","getTextColor","variant","props","placement","isClosable","accessibilityLiveRegion","rest","positionToastArray","component","render","title","themeProps","_title","description","_description","color","config","setTimeout","accessibilityAnnouncement","Platform","AccessibilityInfo","contextValue","useToast","useMemo","show","close","closeAll","ToastRef","Toast"],"mappings":"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","sourcesContent":["import { OverlayContainer } from '@react-native-aria/overlays';\nimport { PresenceTransition } from '../Transitions';\nimport VStack from '../../primitives/Stack/VStack';\nimport { Alert } from '../../composites/Alert';\nimport React, {\n  createContext,\n  MutableRefObject,\n  useState,\n  useMemo,\n} from 'react';\nimport {\n  AccessibilityInfo,\n  Easing,\n  Platform,\n  SafeAreaView,\n} from 'react-native';\nimport IconButton from '../IconButton';\nimport Box from '../../primitives/Box';\nimport { usePropsResolution } from '../../../hooks';\nimport { CloseIcon } from '../../primitives/Icon/Icons';\nimport type { IToastContext, IToastInfo, IToast, IToastProps } from './types';\nimport Text from '../../primitives/Text';\nimport HStack from '../../primitives/Stack/HStack';\nimport { useColorMode } from '../../../core/color-mode/hooks';\n\nlet INSET = 50;\n\nconst POSITIONS = {\n  'top': {\n    top: INSET,\n    left: 0,\n    right: 0,\n  },\n  'top-right': {\n    top: INSET,\n    right: 0,\n  },\n  'top-left': {\n    top: INSET,\n    left: 0,\n  },\n  'bottom': {\n    bottom: INSET,\n    left: 0,\n    right: 0,\n  },\n  'bottom-left': {\n    bottom: INSET,\n    left: 0,\n  },\n  'bottom-right': {\n    bottom: INSET,\n    right: 0,\n  },\n};\n\nconst initialAnimationOffset = 24;\n\nconst transitionConfig: any = {\n  'bottom': initialAnimationOffset,\n  'top': -initialAnimationOffset,\n  'top-right': -initialAnimationOffset,\n  'top-left': -initialAnimationOffset,\n  'bottom-left': initialAnimationOffset,\n  'bottom-right': initialAnimationOffset,\n};\n\nconst ToastContext = createContext<IToastContext>({\n  toastInfo: {},\n  setToastInfo: () => {},\n  setToast: () => {},\n  removeToast: () => {},\n  hideAll: () => {},\n  isActive: () => false,\n  visibleToasts: {},\n  setVisibleToasts: () => {},\n  hideToast: () => {},\n});\n\nconst CustomToast = () => {\n  const { toastInfo, visibleToasts, removeToast } = React.useContext(\n    ToastContext\n  );\n\n  const getPositions = () => {\n    return Object.keys(toastInfo);\n  };\n\n  return getPositions().length > 0 ? (\n    <OverlayContainer>\n      {getPositions().map((position: string) => {\n        if (Object.keys(POSITIONS).includes(position))\n          return (\n            <VStack\n              margin=\"auto\"\n              key={position}\n              // @ts-ignore\n              {...POSITIONS[position]}\n              position=\"absolute\"\n              space={2}\n              alignItems=\"center\"\n              justifyContent=\"center\"\n              pointerEvents=\"box-none\"\n            >\n              {\n                // @ts-ignore\n                toastInfo[position].map((toast: IToast) => (\n                  <PresenceTransition\n                    key={toast.id}\n                    visible={visibleToasts[toast.id]}\n                    onTransitionComplete={(status: any) => {\n                      if (status === 'exited') {\n                        removeToast(toast.id);\n                        toast.config?.onCloseComplete &&\n                          toast.config?.onCloseComplete();\n                      }\n                    }}\n                    initial={{\n                      opacity: 0,\n                      translateY: transitionConfig[position],\n                    }}\n                    animate={{\n                      opacity: 1,\n                      transition: { easing: Easing.ease, duration: 250 },\n                    }}\n                    exit={{\n                      opacity: 0,\n                      scale: 0.85,\n                      transition: { easing: Easing.ease, duration: 100 },\n                    }}\n                  >\n                    <SafeAreaView>{toast.component}</SafeAreaView>\n                  </PresenceTransition>\n                ))\n              }\n            </VStack>\n          );\n        else return null;\n      })}\n    </OverlayContainer>\n  ) : null;\n};\n\nexport const ToastProvider = ({ children }: { children: any }) => {\n  const [toastInfo, setToastInfo] = useState<IToastInfo>({});\n  const [visibleToasts, setVisibleToasts] = useState<\n    {\n      [key in string]: boolean;\n    }\n  >({});\n\n  const [themeProps] = useState(usePropsResolution('Toast', {}));\n\n  const { colorMode } = useColorMode();\n  const toastIndex = React.useRef(1);\n\n  const hideAll = React.useCallback(() => {\n    setVisibleToasts({});\n  }, [setVisibleToasts]);\n\n  const hideToast = React.useCallback(\n    (id: any) => {\n      setVisibleToasts((prevVisibleToasts) => ({\n        ...prevVisibleToasts,\n        [id]: false,\n      }));\n    },\n    [setVisibleToasts]\n  );\n\n  const isActive = React.useCallback(\n    (id: any) => {\n      for (const toastPosition of Object.keys(toastInfo)) {\n        const positionArray: Array<IToast> = toastInfo[toastPosition];\n        return positionArray.findIndex((toastData) => toastData.id === id) > -1;\n      }\n\n      return false;\n    },\n    [toastInfo]\n  );\n\n  const removeToast = React.useCallback(\n    (id: any) => {\n      setToastInfo((prev) => {\n        for (const toastPosition of Object.keys(prev)) {\n          const positionArray: Array<IToast> = prev[toastPosition];\n          const isToastPresent =\n            positionArray.findIndex((toastData) => toastData.id === id) > -1;\n\n          if (isToastPresent) {\n            const newPositionArray = positionArray.filter(\n              (item) => item.id !== id\n            );\n            const temp: any = {};\n            temp[toastPosition] = newPositionArray;\n\n            const newToastInfo = { ...prev, ...temp };\n            return newToastInfo;\n          }\n        }\n\n        return prev;\n      });\n    },\n    [setToastInfo]\n  );\n\n  const getTextColor = React.useCallback(\n    (\n      variant:\n        | 'solid'\n        | 'left-accent'\n        | 'top-accent'\n        | 'outline'\n        | 'subtle'\n        | 'outline-light'\n        | any\n    ): any => {\n      switch (variant) {\n        case 'left-accent':\n        case 'top-accent':\n        case 'subtle':\n          return 'coolGray.800';\n        case 'solid':\n          return 'warmGray.50';\n        case 'outline':\n        case 'outline-light':\n          return colorMode === 'light' ? 'coolGray.800' : 'warmGray.50';\n        default:\n          return 'black';\n      }\n    },\n    [colorMode]\n  );\n\n  const setToast = React.useCallback(\n    (props: IToastProps): number => {\n      // console.log(\"in settoast\");\n      const {\n        placement = 'bottom',\n        title,\n        render,\n        status,\n        id = toastIndex.current++,\n        description,\n        isClosable = true,\n        duration = 5000,\n        variant,\n        accessibilityAnnouncement,\n        accessibilityLiveRegion = 'polite',\n        ...rest\n      } = props;\n\n      let positionToastArray = toastInfo[placement];\n      if (!positionToastArray) positionToastArray = [];\n\n      let component = null;\n\n      if (render) {\n        component = render({ id });\n      } else if (!status && !variant) {\n        component = (\n          <VStack\n            space={title && description ? 1 : 0}\n            {...themeProps}\n            {...rest}\n          >\n            <Box _text={themeProps._title}>{title}</Box>\n            {description && (\n              <Box _text={themeProps._description}>{description}</Box>\n            )}\n          </VStack>\n        );\n      } else if (status || variant) {\n        component = (\n          <Alert\n            maxWidth=\"100%\"\n            alignSelf=\"center\"\n            flexDirection=\"row\"\n            status={status ?? 'info'}\n            variant={variant as any}\n            accessibilityLiveRegion={accessibilityLiveRegion}\n            {...rest}\n          >\n            <VStack space={1} flexShrink={1} w=\"100%\">\n              <HStack\n                flexShrink={1}\n                alignItems=\"center\"\n                justifyContent=\"space-between\"\n              >\n                <HStack space={2} flexShrink={1} alignItems=\"center\">\n                  <Alert.Icon />\n                  <Text\n                    fontSize=\"md\"\n                    fontWeight=\"medium\"\n                    color={getTextColor(variant ?? 'subtle')}\n                    flexShrink={1}\n                  >\n                    {title}\n                  </Text>\n                </HStack>\n                {isClosable ? (\n                  <IconButton\n                    variant=\"unstyled\"\n                    icon={\n                      <CloseIcon\n                        size=\"3\"\n                        color={getTextColor(variant ?? 'subtle')}\n                      />\n                    }\n                    onPress={() => hideToast(id)}\n                  />\n                ) : null}\n              </HStack>\n              <Box\n                px=\"6\"\n                // @ts-ignore\n                _text={{\n                  color: getTextColor(variant ?? 'subtle'),\n                }}\n              >\n                {description}\n              </Box>\n            </VStack>\n          </Alert>\n        );\n      }\n\n      toastInfo[placement] = [\n        ...positionToastArray,\n        { component, id, config: props },\n      ];\n\n      setToastInfo({ ...toastInfo });\n\n      setVisibleToasts({ ...visibleToasts, [id]: true });\n      if (duration !== null) {\n        setTimeout(function () {\n          hideToast(id);\n        }, duration);\n      }\n\n      // iOS doesn't support accessibilityLiveRegion\n      if (accessibilityAnnouncement && Platform.OS === 'ios') {\n        AccessibilityInfo.announceForAccessibility(accessibilityAnnouncement);\n      }\n\n      return id;\n    },\n    [getTextColor, themeProps, toastInfo, visibleToasts, hideToast]\n  );\n\n  const contextValue = React.useMemo(() => {\n    return {\n      toastInfo,\n      setToastInfo,\n      setToast,\n      removeToast,\n      hideAll,\n      isActive,\n      visibleToasts,\n      setVisibleToasts,\n      hideToast,\n    };\n  }, [\n    toastInfo,\n    setToastInfo,\n    setToast,\n    removeToast,\n    hideAll,\n    isActive,\n    visibleToasts,\n    setVisibleToasts,\n    hideToast,\n  ]);\n\n  return (\n    <ToastContext.Provider value={contextValue}>\n      {children}\n      <CustomToast />\n    </ToastContext.Provider>\n  );\n};\n\nexport const useToast = () => {\n  const { setToast, hideAll, isActive, hideToast } = React.useContext(\n    ToastContext\n  );\n\n  const toast = useMemo(\n    () => ({\n      show: setToast,\n      close: hideToast,\n      closeAll: hideAll,\n      isActive,\n    }),\n    [setToast, hideAll, isActive, hideToast]\n  );\n\n  return toast;\n};\n\nexport type IToastService = ReturnType<typeof useToast>;\n\nexport const ToastRef = React.createRef<IToastService>() as MutableRefObject<IToastService>;\n\nexport const Toast: IToastService = {\n  show: (props: IToastProps) => ToastRef.current?.show(props),\n  close: (id: any) => ToastRef.current?.close(id),\n  closeAll: () => ToastRef.current?.closeAll(),\n  isActive: (id: any) => ToastRef.current?.isActive(id),\n};\n"]},"metadata":{},"sourceType":"module"}